<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>JStyx tutorial</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="stylesheet" type="text/css" href="css/jstyx2.css">
</head>

<body>

<p><em>The latest version of this file can be found at
<a href="http://jstyx.sourceforge.net/docs/tutorial.html">http://jstyx.sourceforge.net/docs/tutorial.html</a>
</em></p>

<h1>JStyx tutorial</h1>
<h2>Introduction</h2>
<p>This tutorial gives an overview of the JStyx library and how it is
used to create server and client applications. It assumes that you 
are familiar with Java programming, although you will by no means 
need to be an expert.</p>
<p>In the world of Styx, everything is represented as a file. In order 
to create a Styx server, we create a hierarchy of files (a 
<em>namespace</em>) and serve it up. Conversely, Styx clients open 
files on the remote server and interact with them using read and write 
operations. Files have their own permissions, just like on a Unix-like 
system.</p>

<h2>Setting up</h2>
<p>Download the latest JStyx distribution from
<a href="http://jstyx.sourceforge.net">http://jstyx.sourceforge.net</a> and
simply extract the archive file in a directory of your choice. The 
distribution contains a pre-built JAR (Java archive) in the <code>dist</code>
directory. This has been built with the Sun Java SDK 1.4.2. If you would like
to build the JAR again (if you have changed the source or you need a version
for a different version of Java), change into the <code>bin</code> directory and
enter <code>build</code> (this should work on most systems, Windows and *nix).
Note that you need <a href="http://ant.apache.org/">Apache Ant</a> to build
the distribution from source using this method.</p>

<h2>Testing the installation</h2>
<p>First, make sure that you have a valid setup. To do this, open a console window,
change into the
<code>bin</code> directory of your distribution and enter <code>TestServer</code>.
This creates a Styx server that serves up your home directory (as identified by
the Java system property <code>user.home</code>) under the port 8080. This might
take a short while to start up, especially if your home directory contains a
large number of files. When it is ready, you will see a message like this in your
console window:</p>
<blockquote>
<code>
2005-03-01 16:05:03,890 [main] INFO uk.ac.rdg.resc.jstyx.server.StyxServer -
Listening on port 8080
</code>
</blockquote>
<p><em>This is example output from the <a
href="http://logging.apache.org/log4j/docs/index.html">log4j</a> logging system.
Your message might differ slightly.</em> If you are familiar with Inferno, you
should be able to interact with this server; open an Inferno shell and enter:</p>
<blockquote>
<code>mount -A tcp!localhost!8080 /n/remote</code>
</blockquote><p>If you are not familiar with
Inferno, or want to try another tool anyway, you can open a new console window,
change into the <code>bin</code> directory once more and enter:</p>
<blockquote>
<code>StyxBrowser localhost 8080</code>
</blockquote><p>You should see a graphical interface with a directory tree
in the left-hand column and some information in the other columns, like this:</p>

<img src="./images/tutorial_StyxBrowser.PNG"/>

<p>The StyxBrowser is a very simple GUI for browsing a Styx file hierarchy. At
the moment it is very incomplete; in the future it will allow much more
interaction with the Styx server. (Note that all files are marked with the user
&quot;user&quot;; at the moment the Styx Server does not read the user/group/permissions
data from the host filesystem.) Anyway, for the moment we just want to be sure
that our setup works. Now we can learn a bit more about the JStyx library.</p>

<h2>Creating a server</h2>
<p>As mentioned above, creating a Styx server is a matter of creating a 
hierarchy of files, then serving it up and waiting for connections. The
TestServer program creates the hierarchy of files from the local filesystem.
Let's look at the key parts of the TestServer program (it's in the
<code>uk.ac.rdg.resc.jstyx.examples</code> package):</p>
<blockquote>
<code>
<font color="#000000">String&nbsp;home&nbsp;=&nbsp;System.getProperty</font><font color="#000000">(</font><font color="#2a00ff">&#34;user.home&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br/>
<font color="#3f7f5f">//&nbsp;Set&nbsp;up&nbsp;the&nbsp;file&nbsp;tree</font><br/>
<font color="#000000">StyxDirectory&nbsp;root&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">DirectoryOnDisk</font><font color="#000000">(</font><font color="#000000">home</font><font color="#000000">)</font><font color="#000000">;</font><br/>
<font color="#3f7f5f">//&nbsp;Set&nbsp;up&nbsp;the&nbsp;server&nbsp;and&nbsp;start&nbsp;it</font><br/>
<font color="#000000">StyxServer&nbsp;server&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">StyxServer</font><font color="#000000">(</font><font color="#000000">port,&nbsp;root</font><font color="#000000">)</font><font color="#000000">;</font><br/>
<font color="#000000">server.start</font><font color="#000000">()</font><font color="#000000">;</font><br/>
</code>
</blockquote>
<p>It's very simple. We create a <code>StyxServer</code> object, passing it the
number of the port we want it to listen on and a <code>StyxDirectory</code> that
represents the root of the file hierarchy we want to expose. In this case, the
<code>StyxDirectory</code> is a <code>DirectoryOnDisk</code>, which simply mirrors a
directory in the host filesystem. When requests come in to read the children of
the <code>DirectoryOnDisk</code>, it simply reads the list of child files from the
host filesystem.</p>

<p>The steps to create any Styx server are always the same:</p>
<ol>
	<li>Create a file hierarchy and root it in a <code>StyxDirectory</code>.</li>
	<li>Create a <code>StyxServer</code> object from the <code>StyxDirectory</code> and a port number.</li>
	<li>Start the <code>StyxServer</code>.</li>
</ol>

<p>Often, the file hierarchy we want create will not simply be a mirror of the
directory structure of the underlying filesystem. We may want to do something
more interesting, such as creating a &quot;synthetic&quot; file that performs
some task. We'll go through the process of creating a Styx server that serves up
a file that users can read to obtain the current date and time.</p>

<p>All files in a server-side JStyx hierarchy subclass the abstract class
<code>uk.ac.rdg.resc.jstyx.server.StyxFile</code>. (<code>StyxDirectory</code> is also a
subclass of <code>StyxFile</code> and <code>DirectoryOnDisk</code> is a subclass of
<code>StyxDirectory</code>.) So let's create a class called <code>DateFile</code> that
inherits from <code>StyxFile</code>:</p>
<blockquote>
<code>
<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">uk.ac.rdg.resc.jstyx.StyxException;</font><br/>
<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">uk.ac.rdg.resc.jstyx.server.StyxFile;</font><br/>
<br/>
<font color="#7f0055"><b>public&nbsp;class&nbsp;</b></font><font color="#000000">DateFile&nbsp;</font><font color="#7f0055"><b>extends&nbsp;</b></font><font color="#000000">StyxFile</font><br/>
<font color="#000000">{</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;</b></font><font color="#000000">DateFile</font><font color="#000000">()&nbsp;</font><font color="#7f0055"><b>throws&nbsp;</b></font><font color="#000000">StyxException</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">{</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>super</b></font><font color="#000000">(</font><font color="#2a00ff">&#34;date&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>
<font color="#000000">}</font><br/>
</code>
</blockquote>

<p>There are many constructors for
<code>StyxFile</code>, but we'll stick with the simplest for the moment, i.e. the
one that simply sets the name for the file (other constructors set file
permissions, the owner/group and other things). Note that all the <code>StyxFile</code>
constructors throw <code>StyxException</code> and so our constructor must do this
too (this will only be thrown if we attempt to create a file with the illegal
names <code>&quot;.&quot;</code> or <code>&quot;..&quot;</code>).</p>

<p>We must implement two abstract methods, <code>read()</code> and <code>write()</code>.
These methods control what happens when users try to read from or write to the
file. (There are other methods that we can override, but we'll leave this till
later.) We shan't allow writing to this file so we shall always throw a
<code>StyxException</code> when a write request arrives (this sends an error message
back to the client):</p>

<blockquote>
<code>
<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">java.nio.ByteBuffer;</font><br/>
<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">uk.ac.rdg.resc.jstyx.server.StyxFileClient;</font><br/>
...<br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;</b></font><font color="#7f0055"><b>void&nbsp;</b></font><font color="#000000">write</font><font color="#000000">(</font><font color="#000000">StyxFileClient&nbsp;client,&nbsp;</font><font color="#7f0055"><b>long&nbsp;</b></font><font color="#000000">offset,&nbsp;</font><font color="#7f0055"><b>long&nbsp;</b></font><font color="#000000">count,</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">ByteBuffer&nbsp;data,&nbsp;String&nbsp;user,&nbsp;</font><font color="#7f0055"><b>boolean&nbsp;</b></font><font color="#000000">truncate,&nbsp;</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">tag</font><font color="#000000">)</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>throws&nbsp;</b></font><font color="#000000">StyxException</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">{</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>throw&nbsp;new&nbsp;</b></font><font color="#000000">StyxException</font><font color="#000000">(</font><font color="#2a00ff">&#34;Cannot&nbsp;write&nbsp;to&nbsp;this&nbsp;file&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>
....<br/>
</code>
</blockquote>

<p>Note that we have to import a couple more classes. We shan't worry about all
the arguments to <code>write()</code> for the moment (see the javadoc or the source
for <code>StyxFile</code> if you're interested). Note, however, the first argument:
it allows us to find out which client is accessing the file. This raises the
intriguing and powerful possibility that the file could behave differently for
different clients. We shall see more of this later.</p>

<p>Now we can implement the <code>read()</code> method. This is the bit that does
the actual work. It will return the current date and time to the user:</p>

<blockquote>
<code>
<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">java.util.Date;</font><br/>
<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">uk.ac.rdg.resc.jstyx.StyxUtils;</font><br/>
...<br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;</b></font><font color="#7f0055"><b>void&nbsp;</b></font><font color="#000000">read</font><font color="#000000">(</font><font color="#000000">StyxFileClient&nbsp;client,&nbsp;</font><font color="#7f0055"><b>long&nbsp;</b></font><font color="#000000">offset,&nbsp;</font><font color="#7f0055"><b>long&nbsp;</b></font><font color="#000000">count,&nbsp;</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">tag</font><font color="#000000">)</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>throws&nbsp;</b></font><font color="#000000">StyxException</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">{</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;Get&nbsp;the&nbsp;current&nbsp;date&nbsp;and&nbsp;time&nbsp;in&nbsp;String&nbsp;format</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">String&nbsp;dateStr&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">Date</font><font color="#000000">()</font><font color="#000000">.toString</font><font color="#000000">()</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;Convert&nbsp;the&nbsp;String&nbsp;to&nbsp;bytes&nbsp;in&nbsp;UTF-8&nbsp;format</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>byte</b></font><font color="#000000">[]&nbsp;</font><font color="#000000">dateBytes&nbsp;=&nbsp;StyxUtils.strToUTF8</font><font color="#000000">(</font><font color="#000000">dateStr</font><font color="#000000">)</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">ByteBuffer&nbsp;buf;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>if&nbsp;</b></font><font color="#000000">((</font><font color="#7f0055"><b>int</b></font><font color="#000000">)</font><font color="#000000">offset&nbsp;&gt;=&nbsp;dateBytes.length</font><font color="#000000">)</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">{</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;If&nbsp;the&nbsp;client&nbsp;has&nbsp;requested&nbsp;bytes&nbsp;from&nbsp;an&nbsp;offset&nbsp;greater&nbsp;than&nbsp;the</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;length&nbsp;of&nbsp;the&nbsp;string,&nbsp;return&nbsp;zero&nbsp;bytes&nbsp;(signifies&nbsp;end-of-file)</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">buf&nbsp;=&nbsp;ByteBuffer.allocate</font><font color="#000000">(</font><font color="#990000">0</font><font color="#000000">)</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>else</b></font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">{</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;Work&nbsp;out&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;to&nbsp;return</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">bytesToReturn;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>if&nbsp;</b></font><font color="#000000">(</font><font color="#000000">count&nbsp;&gt;&nbsp;dateBytes.length&nbsp;-&nbsp;offset</font><font color="#000000">)</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">{</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">bytesToReturn&nbsp;=&nbsp;</font><font color="#000000">(</font><font color="#7f0055"><b>int</b></font><font color="#000000">)(</font><font color="#000000">dateBytes.length&nbsp;-&nbsp;offset</font><font color="#000000">)</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>else</b></font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">{</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">bytesToReturn&nbsp;=&nbsp;</font><font color="#000000">(</font><font color="#7f0055"><b>int</b></font><font color="#000000">)</font><font color="#000000">count;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;Wrap&nbsp;the&nbsp;appropriate&nbsp;portion&nbsp;of&nbsp;the&nbsp;array&nbsp;as&nbsp;a&nbsp;ByteBuffer</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">buf&nbsp;=&nbsp;ByteBuffer.wrap</font><font color="#000000">(</font><font color="#000000">dateBytes,&nbsp;</font><font color="#000000">(</font><font color="#7f0055"><b>int</b></font><font color="#000000">)</font><font color="#000000">offset,&nbsp;bytesToReturn</font><font color="#000000">)</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;Send&nbsp;the&nbsp;data&nbsp;back&nbsp;to&nbsp;the&nbsp;user</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>this</b></font><font color="#000000">.replyRead</font><font color="#000000">(</font><font color="#000000">client,&nbsp;buf,&nbsp;tag</font><font color="#000000">)</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>
...
</code>
</blockquote>
<p>Again, we have to import a couple more classes. The comments in the above
method should explain what we're doing, but the gist of it is this:</p>
<ol>
	<li>Prepare the data as an array of bytes.</li>
	<li>Work out the subset of the array that the user has requested, based on
	the provided offset and count.</li>
	<li>If the supplied offset takes us off the end of the data array, return
	zero bytes to signify end-of-file.</li>
	<li>Wrap the subset of the array as a <code>java.nio.ByteBuffer</code> and send
	it back to the client with the <code>replyRead()</code> method of StyxFile.</li>
</ol>
<p>These steps are followed for the vast majority of <code>StyxFile</code>s that
will be created. (Note that Styx always uses the UTF-8 encoding for strings.)</p>

<p><em>Optional:</em> Since the date is always returned in the same format, we
know the length of this file (it is always 28 bytes). We can make sure that
client see the correct length by overriding the <code>getLength()</code> method of
<code>StyxFile</code>:</p>
<blockquote>
<code>
<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">uk.ac.rdg.resc.jstyx.types.ULong;</font><br/>
...<br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;</b></font><font color="#000000">ULong&nbsp;getLength</font><font color="#000000">()</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">{</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>return&nbsp;new&nbsp;</b></font><font color="#000000">ULong</font><font color="#000000">(</font><font color="#990000">28</font><font color="#000000">)</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>
...<br/>
</code>
</blockquote>
<p><em>(The <code>ULong</code> class is a simulation of an unsigned long, a type that
Java lacks.)</em></p>

<p>Now we can create a <code>main()</code> method that serves up this file in a Styx
server:</p>
<blockquote>
<code>
<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">uk.ac.rdg.resc.jstyx.server.StyxDirectory;</font><br/>
<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">uk.ac.rdg.resc.jstyx.server.StyxServer;</font><br/>
...<br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;static&nbsp;</b></font><font color="#7f0055"><b>void&nbsp;</b></font><font color="#000000">main</font><font color="#000000">(</font><font color="#000000">String</font><font color="#000000">[]&nbsp;</font><font color="#000000">args</font><font color="#000000">)&nbsp;</font><font color="#7f0055"><b>throws&nbsp;</b></font><font color="#000000">Exception</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">{</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;Create&nbsp;the&nbsp;root&nbsp;directory&nbsp;of&nbsp;the&nbsp;Styx&nbsp;server</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">StyxDirectory&nbsp;root&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">StyxDirectory</font><font color="#000000">(</font><font color="#2a00ff">&#34;/&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;Add&nbsp;a&nbsp;DateFile&nbsp;to&nbsp;the&nbsp;root</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">root.addChild</font><font color="#000000">(</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">DateFile</font><font color="#000000">())</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;Start&nbsp;a&nbsp;StyxServer,&nbsp;listening&nbsp;on&nbsp;port&nbsp;9876</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">StyxServer</font><font color="#000000">(</font><font color="#990000">9876</font><font color="#000000">,&nbsp;root</font><font color="#000000">)</font><font color="#000000">.start</font><font color="#000000">()</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>
...<br/>
</code>
</blockquote>

<p>The complete <code>DateFile</code> class is included in the JStyx distribution in
the <code>uk.ac.rdg.resc.jstyx.examples</code> package. To run the server, we must be
sure to set the classpath correctly. There is a handy script in the <code>bin</code>
directory of the distribution called <code>JStyxRun</code> that does this for us.
Change into the <code>bin</code> directory and run:</p>
<blockquote>
<code>
JStyxRun uk.ac.rdg.resc.jstyx.examples.DateFile
</code>
</blockquote>
<p>If all is well, you should see a log message saying that the <code>StyxServer</code>
is listening on port 9876.</p>

<h2>Creating a client program</h2>
<p>Now that we have our server, we can create a client program that reads the
file to obtain the current date and time. There are several ways of doing this
using JStyx.</p>

<em><p>Note for Inferno users: you can use Inferno to interact with the server 
too, of course. Open a new shell window and enter:</p>
<blockquote>
<code>mount -A tcp!hostname!9876 /n/remote<br/>
cd /n/remote<br/>
cat date<br/></code>
</blockquote>
<p>Note that you may need to run <code>ndb/cs</code> before doing this so that Inferno
can resolve hostnames into IP addresses.</p>
</em>

<h3>Method 1: Access the file via a URL</h3>
<p>Since everything in the Styx world is represented as a file or set of files,
Styx resources are very easily represented as URLs. In the case of our
<code>DateFile</code> that we created above, the URL of the file is:</p>
<blockquote><code>styx://myhostname:9876/date</code></blockquote>
<p>(where <code>myhostname</code> is the name of the machine running the server 
program, e.g. <code>&quot;localhost&quot;</code>). The first client program that we
shall create will use the Java URL class to get an <code>InputStream</code> that we
will use to read the file:</p>

<blockquote>
<code>
<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">java.net.URL;</font><br/>
<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">java.io.*;</font><br/>
<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">uk.ac.rdg.resc.jstyx.client.StyxFileInputStreamReader;</font><br/>
<font color="#ffffff"></font><br/>
<font color="#7f0055"><b>public&nbsp;class&nbsp;</b></font><font color="#000000">DateFileURLClient</font><br/>
<font color="#000000">{</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;static&nbsp;</b></font><font color="#7f0055"><b>void&nbsp;</b></font><font color="#000000">main</font><font color="#000000">(</font><font color="#000000">String</font><font color="#000000">[]&nbsp;</font><font color="#000000">args</font><font color="#000000">)&nbsp;</font><font color="#7f0055"><b>throws&nbsp;</b></font><font color="#000000">Exception</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">{</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">URL&nbsp;url&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">URL</font><font color="#000000">(</font><font color="#2a00ff">&#34;styx://localhost:9876/date&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">InputStream&nbsp;in&nbsp;=&nbsp;url.openStream</font><font color="#000000">()</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;Use&nbsp;of&nbsp;StyxFileInputStreamReader&nbsp;ensures&nbsp;that&nbsp;UTF-8&nbsp;is&nbsp;used&nbsp;to</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;convert&nbsp;the&nbsp;bytes&nbsp;from&nbsp;the&nbsp;stream&nbsp;into&nbsp;characters</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">InputStreamReader&nbsp;reader&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">StyxFileInputStreamReader</font><font color="#000000">(</font><font color="#000000">in</font><font color="#000000">)</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">BufferedReader&nbsp;bufRead&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">BufferedReader</font><font color="#000000">(</font><font color="#000000">reader</font><font color="#000000">)</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;Read&nbsp;the&nbsp;input&nbsp;data&nbsp;a&nbsp;line&nbsp;at&nbsp;a&nbsp;time&nbsp;and&nbsp;print&nbsp;to&nbsp;standard&nbsp;output</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">String&nbsp;line&nbsp;=&nbsp;</font><font color="#7f0055"><b>null</b></font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>do</b></font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">{</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">line&nbsp;=&nbsp;bufRead.readLine</font><font color="#000000">()</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>if&nbsp;</b></font><font color="#000000">(</font><font color="#000000">line&nbsp;!=&nbsp;</font><font color="#7f0055"><b>null</b></font><font color="#000000">)</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">{</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">System.out.println</font><font color="#000000">(</font><font color="#000000">line</font><font color="#000000">)</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}&nbsp;</font><font color="#7f0055"><b>while&nbsp;</b></font><font color="#000000">(</font><font color="#000000">line&nbsp;!=&nbsp;</font><font color="#7f0055"><b>null</b></font><font color="#000000">)</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;Close&nbsp;the&nbsp;stream</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">bufRead.close</font><font color="#000000">()</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>
<font color="#000000">}</font></code>
</code>
</blockquote>

<p>This should be very familiar to Java programmers; we get an <code>InputStream</code>
to read the data, wrap it in a <code>Reader</code> to convert the binary data correctly
into characters, wrap that in a <code>BufferedReader</code> to allow us to read a line
of data at a time, then read data until we get a null return. The complete class
is included in the distribution as <code>uk.ac.rdg.resc.jstyx.examples.DateFileURLClient</code>.</p>

<p>To run this program, we not only have to set the classpath correctly, but we
also need to tell Java how to deal with <code>styx://</code> URLs, using the
<code>java.protocol.handler.pkgs</code> system property. Both of these things
are done by the <code>JStyxRun</code> script, so we can simply run (from the <code>bin</code>
directory of the distribution):</p>
<blockquote><code>JStyxRun uk.ac.rdg.resc.jstyx.examples.DateFileURLClient</code></blockquote>

<p><em>TODO: deal with debug messages</em></p>

<h3>Method 2: Use the <code>CStyxFile</code> class</h3>
<p>By using URLs we can download data from a Styx server whilst knowing very little
about how the JStyx libraries work. Sometimes, however, we want to get in a bit
deeper so we have more control over our programs. A key class from the client's
point of view is <code>uk.ac.rdg.resc.jstyx.client.CStyxFile</code>. (It is called
<code>CStyxFile</code> to avoid confusion with the server-side <code>StyxFile</code> class.)
</p>

<blockquote>
<code>
<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">java.nio.ByteBuffer;</font><br/>
<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">uk.ac.rdg.resc.jstyx.client.StyxConnection;</font><br/>
<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">uk.ac.rdg.resc.jstyx.client.CStyxFile;</font><br/>
<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">uk.ac.rdg.resc.jstyx.StyxUtils;</font><br/>
<font color="#ffffff"></font><br/>
<font color="#7f0055"><b>public&nbsp;class&nbsp;</b></font><font color="#000000">DateFileClient2</font><br/>
<font color="#000000">{</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;static&nbsp;</b></font><font color="#7f0055"><b>void&nbsp;</b></font><font color="#000000">main</font><font color="#000000">(</font><font color="#000000">String</font><font color="#000000">[]&nbsp;</font><font color="#000000">args</font><font color="#000000">)&nbsp;</font><font color="#7f0055"><b>throws&nbsp;</b></font><font color="#000000">Exception</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">{</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;Create&nbsp;and&nbsp;open&nbsp;a&nbsp;connection&nbsp;to&nbsp;the&nbsp;remote&nbsp;server</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">StyxConnection&nbsp;conn&nbsp;=&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">StyxConnection</font><font color="#000000">(</font><font color="#2a00ff">&#34;localhost&#34;</font><font color="#000000">,&nbsp;</font><font color="#990000">9876</font><font color="#000000">)</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">conn.connect</font><font color="#000000">()</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;Get&nbsp;a&nbsp;CStyxFile&nbsp;representing&nbsp;the&nbsp;DateFile&nbsp;at&nbsp;the&nbsp;remote&nbsp;end,</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;opening&nbsp;it&nbsp;for&nbsp;reading</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">CStyxFile&nbsp;dateFile&nbsp;=&nbsp;conn.openFile</font><font color="#000000">(</font><font color="#2a00ff">&#34;date&#34;</font><font color="#000000">,&nbsp;StyxUtils.OREAD</font><font color="#000000">)</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">ByteBuffer&nbsp;buf&nbsp;=&nbsp;</font><font color="#7f0055"><b>null</b></font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>do</b></font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">{</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;Read&nbsp;a&nbsp;chunk&nbsp;of&nbsp;data&nbsp;from&nbsp;the&nbsp;file</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">buf&nbsp;=&nbsp;dateFile.read</font><font color="#000000">()</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;If&nbsp;we&nbsp;have&nbsp;reached&nbsp;EOF,&nbsp;there&nbsp;will&nbsp;be&nbsp;no&nbsp;bytes&nbsp;in&nbsp;the&nbsp;buffer</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>if&nbsp;</b></font><font color="#000000">(</font><font color="#000000">buf.hasRemaining</font><font color="#000000">())</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">{</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;Convert&nbsp;the&nbsp;data&nbsp;in&nbsp;the&nbsp;buffer&nbsp;to&nbsp;a&nbsp;string&nbsp;and&nbsp;print&nbsp;it</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">String&nbsp;s&nbsp;=&nbsp;StyxUtils.dataToString</font><font color="#000000">(</font><font color="#000000">buf</font><font color="#000000">)</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">System.out.print</font><font color="#000000">(</font><font color="#000000">s</font><font color="#000000">)</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}&nbsp;</font><font color="#7f0055"><b>while&nbsp;</b></font><font color="#000000">(</font><font color="#000000">buf.hasRemaining</font><font color="#000000">())</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;Close&nbsp;the&nbsp;file&nbsp;and&nbsp;the&nbsp;connection</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">dateFile.close</font><font color="#000000">()</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">conn.close</font><font color="#000000">()</font><font color="#000000">;</font><br/>
<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>
<font color="#000000">}</font>
</code>
</blockquote>

</body>
</html>